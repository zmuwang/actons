!function(a){function c(c,d){var e=window.pageYOffset,f=Math.floor(d.width()/2-c.width()/2),g=Math.floor(e+a(window).height()/2-c.height()/2);return 0>f&&(g=0),e>g&&(g=e),{top:g,left:f,zIndex:b++}}function d(a){this._init(a)}var b=1e4;a.extend(d.prototype,{_opts:{containerTpl:"body",dialogTpl:'<div class="action-dialog-model" style="position:absolute"/>',bodyTpl:'<div class="action-dialog-model-body"/>',btnsTpl:'<div class="action-dialog-model-btns"/>',btnTpl:'<button class="action-dialog-model-btn"/>',closeTpl:'<div class="action-dialog-model-close"  style="display:block;position:absolute;top:0;right:0;">x</div>',maskTpl:'<div style="display:block;width:100%;height:100%;background:#000;position:absolute;position:fixed;top:0;left:0;"/>',btnOkTitle:"确认",btnCancelTitle:"取消",showBtnOk:!0,showBtnCancel:!1,showBtnClose:!1},_init:function(b){"string"==typeof b&&(b={message:b}),this.opts=a.extend({},this._opts,b),this.container=a(this.opts.containerTpl),this.show()},show:function(){var d=this;d.mask=a(d.opts.maskTpl).appendTo(d.container).css({zIndex:b++,opacity:.2}),d.dialog=a(d.opts.dialogTpl).appendTo(d.container),d.body=a(d.opts.bodyTpl).appendTo(d.dialog),d.opts.message&&d.body.html(d.opts.message),d.btns=a(d.opts.btnsTpl).appendTo(d.dialog),d.opts.showBtnOk&&a(d.opts.btnTpl).appendTo(d.btns).html(d.opts.btnOkTitle).on(a.tap_click,function(){d.close(),a.evalData(d.opts.data)}),d.opts.showBtnCancel&&a(d.opts.btnTpl).appendTo(d.btns).html(d.opts.btnCancelTitle).on(a.tap_click,function(){d.close()}),d.opts.showBtnClose&&a(d.opts.closeTpl).appendTo(d.dialog).on(a.tap_click,function(){d.close()}),d.btns.html()||d.btns.remove(),d.dialog.css(c(d.dialog,d.container)).show()},close:function(){var a=this;a.dialog.remove(),a.mask.remove()}}),a.actionDialog=function(a){return new d(a)},a.extendAction({info:function(){var b=this,d=b.message||errorMsg,e=a("body"),f=a('<div class="action-dialog-info" style="position:absolute"><div class="action-dialog-info-body"></div></div>'),g=f.find(".action-dialog-info-body");g.html(d),f.appendTo(e).css(c(f,e)).css({opacity:0}).animate({opacity:1},2e3,function(){f.hide().remove(),a.evalData(b.data)})},_alert:function(b){var c={message:b||this.message};b||(c.data=this.data),a.actionDialog(c)},error:function(){this.warn()},confirm:function(){var b=this.message||errorMsg;a.actionDialog({message:b,data:this.data,showBtnCancel:!0})},popHtmlFragment:function(){new d({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})},popHtmlFragmentUrl:function(){var a=this;a.element.ajaxAction({actions:{string:function(){new d({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})}},ajaxOpts:{url:a.data}})}})}($);