!function(a){function d(c,d){var e=window.pageYOffset,f=Math.floor(d.width()/2-c.width()/2),g=Math.floor(e+a(window).height()/2-c.height()/2);return 0>f&&(g=0),e>g&&(g=e),{top:g,left:f,zIndex:b++}}function e(a){this._init(a)}var b=1e4,c="createTouch"in document?"tap":"click";a.extend(e.prototype,{_opts:{containerTpl:"body",dialogTpl:'<div class="action-dialog-model" style="position:absolute"/>',bodyTpl:'<div class="action-dialog-model-body"/>',btnsTpl:'<div class="action-dialog-model-btns"/>',btnTpl:'<button class="action-dialog-model-btn"/>',closeTpl:'<div class="action-dialog-model-close"  style="display:block;position:absolute;top:0;right:0;">x</div>',maskTpl:'<div style="display:block;width:100%;height:100%;background:#000;position:absolute;position:fixed;top:0;left:0;"/>',btnOkTitle:"确认",btnCancelTitle:"取消",showBtnOk:!0,showBtnCancel:!1,showBtnClose:!1},_init:function(b){"string"==typeof b&&(b={message:b}),this.opts=a.extend({},this._opts,b),this.container=a(this.opts.containerTpl),this.show()},show:function(){var e=this;e.mask=a(e.opts.maskTpl).appendTo(e.container).css({zIndex:b++,opacity:.2}),e.dialog=a(e.opts.dialogTpl).appendTo(e.container),e.body=a(e.opts.bodyTpl).appendTo(e.dialog),e.opts.message&&e.body.html(e.opts.message),e.btns=a(e.opts.btnsTpl).appendTo(e.dialog),e.opts.showBtnOk&&a(e.opts.btnTpl).appendTo(e.btns).html(e.opts.btnOkTitle).on(c,function(){e.close(),a.evalData(e.opts.data)}),e.opts.showBtnCancel&&a(e.opts.btnTpl).appendTo(e.btns).html(e.opts.btnCancelTitle).on(c,function(){e.close()}),e.opts.showBtnClose&&a(e.opts.closeTpl).appendTo(e.dialog).on(c,function(){e.close()}),e.btns.html()||e.btns.remove(),e.dialog.css(d(e.dialog,e.container)).show()},close:function(){var a=this;a.dialog.remove(),a.mask.remove()}}),a.actionDialog=function(a){return new e(a)},a.extendAction({info:function(){var b=this,c=b.message||errorMsg,e=a("body"),f=a('<div class="action-dialog-info" style="position:absolute"><div class="action-dialog-info-body"></div></div>'),g=f.find(".action-dialog-info-body");g.html(c),f.appendTo(e).css(d(f,e)).css({opacity:0}).animate({opacity:1},2e3,function(){f.hide().remove(),a.evalData(b.data)})},_alert:function(b){var c={message:b||this.message};b||(c.data=this.data),a.actionDialog(c)},error:function(){this.warn()},confirm:function(){var b=this.message||errorMsg;a.actionDialog({message:b,data:this.data,showBtnCancel:!0})},popHtmlFragment:function(){new e({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})},popHtmlFragmentUrl:function(){var a=this;a.element.ajaxAction({actions:{string:function(){new e({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})}},ajaxOpts:{url:a.data}})}})}($);