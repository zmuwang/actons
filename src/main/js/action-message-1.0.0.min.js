!function(a){function c(c,d){var e=a(window),f=e.scrollTop(),g=Math.floor(d.width()/2-c.width()/2),h=Math.floor(f+e.height()/2-c.height()/2);return 0>g&&(h=0),f>h&&(h=f),{top:h,left:g,zIndex:b++}}function d(a){this._init(a)}var b=1e4;a.actionDialog=function(a){return new d(a)},a.actionDialog.extend=function(b){a.extend(d.prototype,b)},a.actionDialog.extend({_opts:{containerTpl:"body",dialogTpl:'<div class="action-dialog-model" style="position:absolute"/>',bodyTpl:'<div class="action-dialog-model-body"/>',btnsTpl:'<div class="action-dialog-model-btns"/>',btnTpl:'<button class="action-dialog-model-btn action-dialog-model-close"/>',closeTpl:'<div class="action-dialog-model-close"  style="display:block;position:absolute;top:0;right:0;">x</div>',maskTpl:'<div class="" style="display:block;width:100%;height:100%;background:#000;position:absolute;position:fixed;top:0;left:0;"/>',btnOkTitle:"确认",btnCancelTitle:"取消",closeBtnSelect:".action-dialog-model-close",showBtnOk:!0,showBtnCancel:!1,showBtnClose:!1},_init:function(b){"string"==typeof b&&(b={message:b}),this.opts=a.extend({},this._opts,b),this.container=a(this.opts.containerTpl),this.show()},show:function(){var e,d=this;for(d.mask=a(d.opts.maskTpl).appendTo(d.container).css({zIndex:b++,opacity:.2}),d.dialog=a(d.opts.dialogTpl).appendTo(d.container),e=d.dialog;1==e.children().length;)e=e.children();d.body=a(d.opts.bodyTpl).appendTo(e),d.opts.message&&d.body.html(d.opts.message),d.btns=a(d.opts.btnsTpl).appendTo(d.dialog),d.opts.showBtnOk&&(d.btnOk=a(d.opts.btnTpl).appendTo(d.btns).html(d.opts.btnOkTitle)),d.opts.showBtnCancel&&a(d.opts.btnTpl).appendTo(d.btns).html(d.opts.btnCancelTitle),d.opts.showBtnClose&&a(d.opts.closeTpl).appendTo(d.dialog),d.dialog.on(a.tap_click,d.opts.closeBtnSelect,function(){d.close(),d.btnOk&&this==d.btnOk[0]&&a.evalData(d.opts.data)}),d.btns.html()||d.btns.remove(),d.dialog.css(c(d.dialog,d.container)).show()},close:function(){var a=this;a.dialog.remove(),a.mask.remove()}}),a.extendAction({info:function(){var b=this,d=b.message||errorMsg,e=a("body"),f=a('<div class="action-dialog-info" style="position:absolute"><div class="action-dialog-info-body"></div></div>'),g=f.find(".action-dialog-info-body");g.html(d),f.appendTo(e).css(c(f,e)).css({opacity:0}).animate({opacity:1},2e3,function(){f.hide().remove(),a.evalData(b.data)})},_alert:function(b){var c={message:b||this.message};b||(c.data=this.data),a.actionDialog(c)},error:function(){this.warn()},confirm:function(){var b=this.message||errorMsg;a.actionDialog({message:b,data:this.data,showBtnCancel:!0})},popHtmlFragment:function(){new d({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})},popHtmlFragmentUrl:function(){var a=this;a.element.ajaxAction({actions:{string:function(){new d({bodyTpl:this.data,showBtnOk:!1,showBtnClose:!0})}},ajaxOpts:{url:a.data}})}}),a(function(){a(document).on(a.tap_click,".action-dialog-model-close-top",function(){})})}($);